!function(t){var i=function(t){var i=["webkit","Moz","o","ms"],e="";for(var s in i)if(e=i[s]+"Transition",void 0!==t.style[e])return"-"+i[s].toLowerCase()+"-";return!1}(document.createElement(e));console.log(i);var e=function(){function e(i,e){this.setting=t.extend(!0,t.fn.FullPageSlide.defaults,e||{}),this.element=i,this.init()}return e.prototype={init:function(){this.d_sectionWrap=t("#J-fullPageSlide .section-wrapper"),this.d_section=t("#J-fullPageSlide .section"),this.s_navMenu=this.setting.navMenu,this.s_author=this.setting.author,this.s_direction=this._disposeDirection(),this.s_isScrolling=this.setting.isScrolling,this.s_index=this.setting.index>=0&&this.setting.index<this._getSectionCount()?this.setting.index:0,this.s_active=this.setting.active,this.s_isLoop=this.setting.isLoop,this.s_duration=this.setting.duration,this.s_easing=this.setting.easing,this.s_afterLoad=this.setting.afterLoad,this.s_onLeave=this.setting.onLeave,this.b_tiggerSection=[],this.b_finshed=!0,this.renderNav(),this.s_isScrolling?(this.s_direction?this._initVertiLayout():this._initHorizLayout(),this.scrollAnimate()):t("html, body").css({height:t(window).height(),overflow:"hidden"}),this._initEvent(),this._afterScrolling(),this._setMenuActive()},renderNav:function(){var i=this;if(this.s_navMenu.length>0){var e=t('<header class="topHeader"><h1 class="author"><a href="#">'+this.s_author+'</a></h1><nav class="topNav"><ul></ul></nav></header>');this.d_sectionWrap.children().eq(0).after(e),this.d_topHeader=t(".topHeader");var s=t(".topHeader .topNav ul");t.each(i.s_navMenu,function(i,e){var n=t('<li class="item"><a href="#">'+e+"</a></li>");s.append(n)})}},prevSlide:function(){this.s_index>0?this.s_index--:this.s_isLoop&&(this.s_index=this._getSectionCount()-1),this.scrollAnimate()},nextSlide:function(){this.s_index<this.pagesCount()-1?this.s_index++:me.s_isLoop&&(this.s_index=0),this.scrollAnimate()},scrollAnimate:function(){var e=this,s=this.d_section.eq(e.s_index).position();if(i)if(this.s_isScrolling)e.s_direction?t("body").animate({scrollTop:s.top},"slow"):t("body").animate({scrollLeft:s.left},"slow");else{var n=e.s_direction?"translateY(-"+s.top+"px)":"translateX(-"+s.left+"px)";e.d_sectionWrap.css(i+"transition","all "+e.s_duration+"ms "+e.s_easing),e.d_sectionWrap.css(i+"transform",n)}},_setMenuActive:function(){var t=this;t.d_topHeader.find(".topNav .item").removeClass(t.s_active),t.d_topHeader.find(".topNav .item a").css({color:"#fff"}),t.d_topHeader.find(".topNav .item").eq(t.s_index-1).addClass(t.s_active),t.d_topHeader.find(".topNav .item."+t.s_active+" a").css({color:"#ccc"})},_getSectionCount:function(){return this.d_section.length},_getSectionWrapSize:function(){return this.s_direction?this.element.height():this.element.width()},_initVertiLayout:function(){var i=this;t("html, body").css({height:t(window).height()*i._getSectionCount()}),this.d_section.css({height:t(window).height()}),this.d_topHeader.removeClass("topHeader-fixed")},_initHorizLayout:function(){var t=this,i=100*t._getSectionCount()+"%",e=(100/t._getSectionCount()).toFixed(2)+"%";t.d_sectionWrap.width(i),t.d_section.width(e).css({float:"left"}),console.log(e),this.d_sectionWrap.find(".topHeader").remove(),this.element.append(this.d_topHeader),this.d_topHeader.addClass("topHeader-fixed")},_disposeDirection:function(){if("vertical"===this.setting.direction)return!0;if("horizontal"===this.setting.direction)return!1;throw Error("direction参数错误.")},_initEvent:function(){var i=this;this.d_sectionWrap.on("click",".topNav li",function(e){e.preventDefault(),console.log(i.d_topHeader),i.d_sectionWrap.find(".topHeader").addClass("topHeader-fixed"),i.s_index=t(this).index()+1,i.scrollAnimate(),i._setMenuActive()}),t(window).on("scroll",i._deBounce(i._linkageScrolling,500))},_afterScrolling:function(){var i=this,e=this.s_index;t.isFunction(i.s_afterLoad)&&i.s_afterLoad.call(this,e+1)},_linkageScrolling:function(){console.log(t("body").scrollTop())},_deBounce:function(t,i,e){var s;return function(){clearTimeout(s),s=setTimeout(t,i)}}},e}();t.fn.FullPageSlide=function(i){this.each(function(){var s=t(this),n=s.data("FullPageSlide");if(n||(n=new e(s,i),s.data("FullPageSlide",n)),"string"===t.type(i))return n[i]()})},t.fn.FullPageSlide.defaults={navMenu:[],author:"",active:"active",index:0,easing:"ease",duration:500,direction:"vertical",isLoop:!1,isScrolling:!0,isKeyboard:!0,isSlimscroll:!1,afterLoad:"",onLeave:""},t(function(){t("[data-fullpageslide]").FullPageSlide()})}(jQuery);